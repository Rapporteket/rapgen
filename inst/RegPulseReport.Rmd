```{r echo=FALSE, results='asis'}
# define vars
registryKeyNames <- c("nger", "Nakke", "norgast","nra","Muskel","noricStagingNasjonal")
peculiarities <- c(rep(FALSE, 6))
startDate <- "2015-01-01"
endDate <- "2016-09-30"

# get data
df <- data.frame()
for (i in 1:length(registryKeyNames)) {
  dfr <- rapgen::RegPulse(registryName = registryKeyNames[i],
                          startDate = startDate,
                          endDate = endDate,
                          peculiarity = peculiarities[i])
  df <- rbind(df, dfr)
}

# sort by performance
df <- df[order(df$sumPulse, decreasing = TRUE), ]

# remove sumPulse
df$sumPulse <- NULL

# indicators
bad <- ":-("
mediocre <- ":-|"
good <- ":-)"

# indicator thresholds (t) for each period as vector [bad mediocre good]
td <- c(1/7, 2/7, 4/7)
tw <- c(5/30, 10/30, 20/30)
tm <- c(9/12, 10/12, 11/12)
ty <- rep(1, 3)

# add indicators to table
df <- dplyr::mutate(df, day = ifelse(day < td[1], paste(day, bad),
                 ifelse(day >= td[1] & day < td[2], paste(day, mediocre),
                        paste(day, good))))


# rename registries
df["regName"][df["regName"]=="nger"] <- "NGER"
df["regName"][df["regName"]=="Nakke"] <- "NKR Nakke"
df["regName"][df["regName"]=="norgast"] <- "NoRGast"
df["regName"][df["regName"]=="nra"] <- "NRA"
df["regName"][df["regName"]=="noricStagingNasjonal"] <- "NORIC"

# rename column names
names(df)[names(df)=="regName"] <- "Register"
names(df)[names(df)=="year"] <- "År"
names(df)[names(df)=="yearN"] <- "N<sub>År</sub>"
names(df)[names(df)=="month"] <- "Måned"
names(df)[names(df)=="monthN"] <- "N<sub>Måned</sub>"
names(df)[names(df)=="week"] <- "Uke"
names(df)[names(df)=="weekN"] <- "N<sub>Uke</sub>"
names(df)[names(df)=="day"] <- "Dag"
names(df)[names(df)=="dayN"] <- "N<sub>Dag</sub>"


# knit neatly
knitr::kable(df, format = "markdown", row.names = FALSE, digits = 2)
```
Table: Andel og antall av årene, månedene, ukene og dagene med minimum ett opprettet skjema målt i perioden fra og med `r as.character(format(as.Date(startDate), format="%e. %B %Y"))` til og med `r as.character(format(as.Date(endDate), format="%e. %B %Y"))`.
